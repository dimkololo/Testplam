/* ===============================
   БАЗОВЫЕ ПЕРЕМЕННЫЕ
=============================== */
:root {
  --bg: #0f1115;
  --text: #e7eaf0;
  --accent: #FF7300;
  --chip: #D9D9D9;
  --popup-bg: rgba(221,221,221,.25);
  --shadow: 0 8px 16px rgba(0,0,0,.25);
  --radius-popup: 42px;
  --radius-chip: 35px;
  --radius-block: 16px;

  /* размеры макетов */
  --mw: 393;   --mh: 853;    /* medium фон */
  --sw: 320;   --sh: 568;    /* small фон */
  --lw: 834;   --lh: 1194;   /* large фон (iPad Pro 11") */

  /* координаты центра пня (в пикселях макета) */
  --stump-x-m: 294;  --stump-y-m: 526;   /* medium */
  --stump-x-s: 255;  --stump-y-s: 380;   /* small */
  --stump-x-l: 624;  --stump-y-l: 780;   /* large */

  /* расширенная хит-зона (включает табличку) */
  --hot-w-m: 340;   --hot-h-m: 140;   --hot-off-x-m: -90;
  --hot-w-s: 250;   --hot-h-s: 100;   --hot-off-x-s: -70;
  --hot-w-l: 480;   --hot-h-l: 190;   --hot-off-x-l: -120;
}

/* ===============================
   ОСНОВНЫЕ СБРОСЫ
=============================== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}

/* ===============================
   СЦЕНА И ФОН
=============================== */
.scene{
  position:relative;
  width:100vw;
  height:100svh;
  overflow:hidden;
  display:grid;
  place-items:center;
  background:#0a0d12;
}

.stage{
  position:relative;
  display:inline-block;
  max-width:100vw;
  max-height:100svh;
}

.stage__img{
  display:block;
  max-width:100vw;
  max-height:100svh;
  width:auto;
  height:auto;
  object-fit:contain;
}

/* ===============================
   ХИТ-ЗОНА ПЕНЬКА
=============================== */

/* medium (по умолчанию) */
.stage{ --design-w: var(--mw); --design-h: var(--mh); }

.hotspot{
  position:absolute;
  transform:translate(-50%,-50%);
  border:0;
  background:transparent;
  cursor:pointer;
}

/* зона пня + табличка */
.hotspot--stump{
  left:  calc( (var(--stump-x-m) + var(--hot-off-x-m)) / var(--design-w) * 100% );
  top:   calc(  var(--stump-y-m) / var(--design-h) * 100% );
  width: calc(  var(--hot-w-m)   / var(--design-w) * 100% );
  height:calc(  var(--hot-h-m)   / var(--design-h) * 100% );
}

/* small (≤360px) */
@media (max-width:360px){
  .stage{ --design-w: var(--sw); --design-h: var(--sh); }
  .hotspot--stump{
    left:  calc( (var(--stump-x-s) + var(--hot-off-x-s)) / var(--design-w) * 100% );
    top:   calc(  var(--stump-y-s) / var(--design-h) * 100% );
    width: calc(  var(--hot-w-s)   / var(--design-w) * 100% );
    height:calc(  var(--hot-h-s)   / var(--design-h) * 100% );
  }
}

/* large (≥768px ширина или ≥1024px высота) */
@media (min-width:768px), (min-height:1024px){
  .stage{ --design-w: var(--lw); --design-h: var(--lh); }
  .hotspot--stump{
    left:  calc( (var(--stump-x-l) + var(--hot-off-x-l)) / var(--design-w) * 100% );
    top:   calc(  var(--stump-y-l) / var(--design-h) * 100% );
    width: calc(  var(--hot-w-l)   / var(--design-w) * 100% );
    height:calc(  var(--hot-h-l)   / var(--design-h) * 100% );
  }
}

/* ===============================
   МОДАЛКА
=============================== */
.modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: grid;
  place-items: center;
}
.modal[hidden] { display: none; }
.modal__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.5);
}
.modal__dialog {
  position: relative;
  width: min(560px, calc(100vw - 24px));
  max-width: 560px;
  border-radius: var(--radius-popup);
  background: var(--popup-bg);
  box-shadow: var(--shadow);
  padding: 18px 16px 22px;
}
.modal__content {
  max-height: calc(100svh - 60px);
  overflow-y: auto;
  overflow-x: hidden;
}
.modal__close {
  position: absolute;
  top: 10px;
  left: 10px;
  border: 0;
  background: transparent;
  color: #fff;
  font-size: 20px;
  cursor: pointer;
}

/* ===============================
   ПОПАП №1
=============================== */
.popup {
  display: grid;
  gap: 12px;
  justify-items: center;
  width: 100%;
  max-width: 420px;
  margin-inline: auto;
}
.u-center {
  display: flex;
  justify-content: center;
  width: 100%;
}
.btn-pick, .btn-submit {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: clamp(206px, 90%, 360px);
  height: 56px;
  border-radius: var(--radius-chip);
  font-size: 18px;
  font-weight: 700;
  border: 0;
  cursor: pointer;
  user-select: none;
}
.btn-pick {
  background: var(--chip);
  color: #000;
  border: 1px solid rgba(0,0,0,.06);
}
.btn-submit {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 6px 14px rgba(255,115,0,.25);
}
.card {
  width: 100%;
  background: var(--chip);
  border-radius: var(--radius-block);
  padding: 12px;
  border: 1px solid rgba(0,0,0,.06);
}
.slider-card { padding: 14px; }
.slider-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
}
.label {
  color: #000;
  font-weight: 700;
  opacity: .75;
}
.range {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 16px;
  border-radius: 200px;
  background: #D0D0D0;
  outline: none;
}
.range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  border: 1px solid #fff;
  cursor: pointer;
}
.range::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  border: 1px solid #fff;
  cursor: pointer;
}
.form-card {
  display: grid;
  gap: 10px;
  padding: 14px;
}
.field {
  width: 100%;
  padding: 14px 16px;
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,.08);
  background: #fff;
  color: #111;
  font: 16px/1.4 inherit;
}
.field::placeholder {
  color: #9aa3b2;
  opacity: .8;
}
.field:focus {
  outline: 2px solid rgba(255,115,0,.35);
}
