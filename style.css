:root{
  --bg:#0f1115;
  --text:#e7eaf0;
  --accent:#FF7300;
  --chip:#D9D9D9;
  --popup-bg: rgba(221,221,221,.25);
  --shadow: 0 8px 16px rgba(0,0,0,.25);
  --radius-popup: 42px;
  --radius-chip: 35px;
  --radius-block:16px;

  /* безопасные отступы Telegram/чёлка */
  --safe-top: max(100px, env(safe-area-inset-top, 0px));
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* ===== размеры (MEDIUM по умолчанию) ===== */
  --w-faq:136px;
  --w-plus:182px;        /* облако со звездой */
  --w-tv:260px;
  --w-chair:190px;
  --w-stump:178px;
  --w-notebook:150px;
  --w-gift:112px;
}
/* SMALL (например ≤ 360px) */
@media (max-width:360px){
  :root{
    --w-faq:98px;
    --w-plus:134px;
    --w-tv:190px;
    --w-chair:150px;
    --w-stump:130px;
    --w-notebook:100px;
    --w-gift:75px;
  }
}
/* LARGE (например iPad Pro 11" и шире) */
@media (min-width:834px){
  :root{
    --w-faq:240px;
    --w-plus:330px;
    --w-tv:390px;
    --w-chair:330px;
    --w-stump:250px;
    --w-notebook:230px;
    --w-gift:190px;
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  background:#0f1115;
  overflow:hidden;
}

/* СЦЕНА + ФОН (./bgicons/) */
.scene{
  position:relative;
  width:100vw;
  height:100svh;
  overflow:hidden;
  background:#0a0d12;
}
.scene__bg{
  position:absolute; inset:0;
  background:center/cover no-repeat;
  background-image:url("./bgicons/bg-base.PNG");
  background-image:image-set(
    url("./bgicons/bg-base.PNG") 1x,
    url("./bgicons/bg-base@2x.PNG") 2x
  );
}

/* ===== КЛАСТЕР: ТВ + кресло + пенёк =====
   ширина кластера рассчитывается от размера ТВ */
.cluster{
  position:absolute; left:50%; top:58%;
  transform:translate(-50%,-50%);
  width: calc(var(--w-tv) * 2.6);  /* площадка под три элемента */
  aspect-ratio: 16/10;
  pointer-events:none;
}
.cluster > img{ position:absolute; display:block; height:auto; }

/* ТВ — центр композиции */
.cluster__tv{
  left:50%; top:42%;
  transform:translate(-50%,-50%);
  width: var(--w-tv);
}
/* Кресло — слева ниже */
.cluster__chair{
  left:28%; top:78%;
  transform:translate(-50%,-50%);
  width: var(--w-chair);
}
/* Пенёк — справа ниже */
.cluster__stump{
  left:78%; top:75%;
  transform:translate(-50%,-50%);
  width: var(--w-stump);
}

/* ===== ИКОНКИ по углам ===== */
.icon{
  position:absolute; display:block; width:auto; height:auto;
  transform:translate(-50%,-50%);
  user-select:none; pointer-events:none;
}
/* Верхние облака: гарантированный отступ >=100px */
.icon--faq{
  left:22%; top: var(--safe-top);
  transform:translate(-50%,-50%);
  width: var(--w-faq);
}
.icon--plus{
  left:78%; top: var(--safe-top);
  transform:translate(-50%,-50%);
  width: var(--w-plus);
}
/* Нижние: от нижнего края */
.icon--notebook{
  left:22%; bottom: calc(var(--safe-bottom) + 16px);
  transform:translate(-50%,0);
  width: var(--w-notebook);
}
.icon--gift{
  left:82%; bottom: calc(var(--safe-bottom) + 16px);
  transform:translate(-50%,0);
  width: var(--w-gift);
}

/* ===== ХИТ-ЗОНЫ (кнопки) ===== */
.hit{
  position:absolute; border:0; background:transparent; cursor:pointer;
  transform:translate(-50%,-50%);
}

/* Облака — зона соответствует размерам */
.hit--faq{
  left:22%; top: var(--safe-top);
  transform:translate(-50%,-50%);
  width: var(--w-faq);
  aspect-ratio: 2.6 / 1;   /* приблизительное соотношение облака */
}
.hit--plus{
  left:78%; top: var(--safe-top);
  transform:translate(-50%,-50%);
  width: var(--w-plus);
  aspect-ratio: 3 / 1;     /* облако+звезда шире */
}

/* Дневник/подарок — снизу, почти квадратные */
.hit--notebook{
  left:22%; bottom: calc(var(--safe-bottom) + 16px);
  transform:translate(-50%,0);
  width: var(--w-notebook);
  aspect-ratio: 1 / 1;
}
.hit--gift{
  left:82%; bottom: calc(var(--safe-bottom) + 16px);
  transform:translate(-50%,0);
  width: var(--w-gift);
  aspect-ratio: 1 / 1;
}

/* ПЕНЁК — кликабельная область строго по тем же координатам и ширине,
   что и картинка пенька (теперь одинаково на всех устройствах) */
.hit--stump{
  left:78%; top:75%;
  width: var(--w-stump);
  aspect-ratio: 1.6 / 1; /* прямоугольник, чуть шире высоты; можно подстроить */
}

/* ====== МОДАЛКА (без изменений) ====== */
.modal{ position:fixed; inset:0; z-index:1000; display:grid; place-items:center }
.modal[hidden]{ display:none }
.modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.5) }
.modal__dialog{
  position:relative;
  width:min(560px, calc(100vw - 24px));
  max-width:560px;
  border-radius:var(--radius-popup);
  background:var(--popup-bg);
  box-shadow:var(--shadow);
  padding:18px 16px 22px;
}
.modal__content{ max-height:calc(100svh - 60px); overflow-y:auto; overflow-x:hidden }
.modal__close{ position:absolute; top:10px; left:10px; border:0; background:transparent; color:#fff; font-size:20px; cursor:pointer }

/* ====== ПОПАП №1 (как раньше) ====== */
.popup{ display:grid; gap:12px; justify-items:center; width:100%; max-width:420px; margin-inline:auto }
.u-center{ display:flex; justify-content:center; width:100% }
.btn-pick,.btn-submit{
  display:inline-flex; align-items:center; justify-content:center;
  width:clamp(206px,90%,360px); height:56px;
  border-radius:var(--radius-chip);
  font-size:18px; font-weight:700; border:0; cursor:pointer; user-select:none
}
.btn-pick{ background:var(--chip); color:#000; border:1px solid rgba(0,0,0,.06) }
.btn-submit{ background:var(--accent); color:#fff; box-shadow:0 6px 14px rgba(255,115,0,.25) }

.card{ width:100%; background:var(--chip); border-radius:var(--radius-block); padding:12px; border:1px solid rgba(0,0,0,.06) }
.slider-card{ padding:14px }
.slider-row{ display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px }
.label{ color:#000; font-weight:700; opacity:.75 }
.range{ -webkit-appearance:none; appearance:none; width:100%; height:16px; border-radius:200px; background:#D0D0D0; outline:none }
.range::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%; background:var(--accent); border:1px solid #fff; cursor:pointer }
.range::-moz-range-thumb{ width:18px; height:18px; border-radius:50%; background:var(--accent); border:1px solid #fff; cursor:pointer }

.form-card{ display:grid; gap:10px; padding:14px }
.field{ width:100%; padding:14px 16px; border-radius:16px; border:1px solid rgba(0,0,0,.08); background:#fff; color:#111; font:16px/1.4 inherit }
.field::placeholder{ color:#9aa3b2; opacity:.8 }
.field:focus{ outline:2px solid rgba(255,115,0,.35) }

@media (max-width:340px){
  .btn-pick,.btn-submit{ width:clamp(190px,92%,320px); height:52px }
}

html,body{ overflow-x:hidden }
